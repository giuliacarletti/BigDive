<html>

<head>
    

   <script 
            src="d3.v3.min.js">
   </script>         
</head>

 
<body> 
    
    <svg width = "10000"> </svg>
    <script>
//width mi dà l'ampiezza della serie degli istogrammi
//non mettendo height mi dà quella di default
        
        
        
d3.csv('athletes_sochi.csv', 
    function (data) {
    console.log(data)


    
    var rects = d3.select('svg')
        .selectAll('rect')
        .data(data)
        .enter()
        .append('rect')
       // .attr('height', 0)
        .attr('height', function(d,i) {
            return d.age
        })  
        .attr('width', 5)
        .attr('x', function(d,i) {
              return i*6
              
               })
        .attr('y', function(d,i) {
              return 100-d.age
              
            })  
        .attr('opacity' , 0)
    
    
    rects.transition()
        .duration(2500)
        .delay(function (d,i) {
            return 100*i  
        })
        .attr('opacity', 1)
    
    
    
    
    rects.on('click', function(d,i) {
        console.log(d)
        d3.select(this)
            .attr('fill', 'red')
        
    })
   
    
    })  
       





//coloro gli istogrammi che clicco con il mouse
        
//    rects.on('click', function(){
//        
//            d3.select(this)
//            .transition()
//            .duration(2000)
//            .attr('fill', 'blue')
//                         })
//    






    
    
    
    </script>
    
    </body>
    
</html>