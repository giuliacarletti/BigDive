<!DOCTYPE html>
<html>
    
    <head>
        <link rel="stylesheet" type="text/css" href="style.css" />
         <script src="https://d3js.org/d3.v3.min.js"></script>
    </head>
    
    
    <body>
        
        <div id="column">
        
            <h1>Distribuzione medaglie per fascia d'età</h1>
            <h4>Un'analisi empirica del trade-off esistente tra vigore fisico ed expertise in termini di correlazione tra età degli atleti e risultati, con riferimento alle Olimpiadi di Sochi 2012 </h4>
         
            <p>A cura di: Stefano Mascotti, Marco Quarati e Davide Ritaccio</p>
 
            <svg height="300" ></svg>
            
              <script>
            var custom_load = d3.dsv(';')
            custom_load('BD_Progetto.csv', function(dataset){
                              console.log(dataset)
                    
            var myGroup = d3.select('svg')
                .selectAll('g')
                .data(dataset)
                .enter()
                .append('g')
            
//          barra maschi
                 myGroup.append('rect')
                 .attr('opacity', 0)
                .attr('height', function (d,i){
                    return d.Male_total_medals * 2
                    })
            
                .attr('width', 40)
                .attr('x', function (d,i){
                    return i*150 + 100
                    })
                 .attr('y', function (d,i){
                   return 250-d.Male_total_medals *2
                    })
                 .attr('fill','blue')
                 .transition()
                 .duration(3500)
                 .delay(function(d,i){
                     return i*500 
                 })
                   .attr('opacity', 1)
                 
                 
                 
                 
                 myGroup.append('text')
                  .attr('opacity', 0)
                    .text(function (d,i){
                        return d.Male_total_medals
                    })
                  .attr('x'
                        , function (d,i){
                    return i*150 + 120
                    })
                 .attr('y', function (d,i){
                   return 250-d.Male_total_medals *2 - 5
                    })
                 .attr('text-anchor','middle')
                  .transition()
                  .duration(0)
                  .delay(4000)
                  .attr('opacity', 1)
                 
//                 myGroup.on('click', function(d,i){
//                      .text(function (d,i){
//                    return  i 
//                    })
//                 .attr('x', function (d,i){
//                    return i*150 + 100 + 9
//                    })
//                 .attr('y', function (d,i){
//                   return 280
//                    })
//                 })
//    
              
//          barra femmine
                 myGroup.append('rect')
                   .attr('opacity', 0)
                .attr('height', function (d,i){
                    return d.Female_total_medals * 2
                    })
                .attr('width', 40)
                .attr('x', function (d,i){
                    return i*150 + 150
                    })
                 .attr('y', function (d,i){
                   return 250-d.Female_total_medals * 2
                    })
                 .attr('fill','pink')
                 .transition()
                 .duration(3500)
                 .delay(function(d,i){
                     return i*500 +75
                 })
                   .attr('opacity', 1)
                        
             myGroup.append('text')
                 .attr('opacity', 0)
                 .text(function (d,i){
                    return d.Female_total_medals
                    })
                  .attr('x'
                        , function (d,i){
                    return i*150 + 170
                    })
                 .attr('y', function (d,i){
                   return 250-d.Female_total_medals *2 - 5
                    })
                 .attr('text-anchor','middle')
                 .transition()
                  .duration(0)
                  .delay(4000)
                  .attr('opacity', 1)
             
             
               myGroup.append('text')
                 .attr('opacity', 0)
                 .text(function (d,i){
                    return "Età " + (i*10+10) + "-" + (i*10+19)
                    })
                 .attr('x', function (d,i){
                    return i*150 + 100 + 9
                    })
                 .attr('y', function (d,i){
                   return 280
                    })
//                 .attr('text-anchor','middle')
                  .transition()
                  .duration(0)
                  .delay(4000)
                  .attr('opacity', 1)
             
               })
            </script>       
            
        </div>
        
<!--       <script src="app.js"></script>-->
    </body>
    
</html>
    